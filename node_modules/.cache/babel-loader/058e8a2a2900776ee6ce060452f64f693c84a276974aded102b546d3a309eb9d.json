{"ast":null,"code":"import React,{useRef,useEffect,useState}from'react';import Hls from'hls.js';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AudioPlayer=_ref=>{let{streamingUrl,title,description}=_ref;const audioRef=useRef(null);const[isPlaying,setIsPlaying]=useState(false);const[duration,setDuration]=useState(0);const[currentTime,setCurrentTime]=useState(0);const[loading,setLoading]=useState(false);useEffect(()=>{const audio=audioRef.current;if(!audio||!streamingUrl)return;setLoading(true);if(Hls.isSupported()){const hls=new Hls({enableWorker:false,lowLatencyMode:true,backBufferLength:90});hls.loadSource(streamingUrl);hls.attachMedia(audio);hls.on(Hls.Events.MANIFEST_PARSED,()=>{console.log('HLS manifest loaded successfully');setLoading(false);});hls.on(Hls.Events.ERROR,(event,data)=>{console.error('HLS error:',data);setLoading(false);});return()=>{hls.destroy();};}else if(audio.canPlayType('application/vnd.apple.mpegurl')){// Safari native HLS support\naudio.src=streamingUrl;setLoading(false);}else{console.error('HLS not supported');setLoading(false);}},[streamingUrl]);const togglePlay=async()=>{const audio=audioRef.current;if(!audio)return;try{if(isPlaying){audio.pause();setIsPlaying(false);}else{await audio.play();setIsPlaying(true);}}catch(error){console.error('Play error:',error);}};const handleTimeUpdate=()=>{const audio=audioRef.current;if(!audio)return;setCurrentTime(audio.currentTime);};const handleLoadedMetadata=()=>{const audio=audioRef.current;if(!audio)return;setDuration(audio.duration);};const handleSeek=e=>{const audio=audioRef.current;if(!audio)return;const rect=e.currentTarget.getBoundingClientRect();const percent=(e.clientX-rect.left)/rect.width;audio.currentTime=percent*duration;};const formatTime=time=>{if(isNaN(time))return'0:00';const minutes=Math.floor(time/60);const seconds=Math.floor(time%60);return\"\".concat(minutes,\":\").concat(seconds.toString().padStart(2,'0'));};return/*#__PURE__*/_jsxs(\"div\",{className:\"audio-player\",children:[/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,onTimeUpdate:handleTimeUpdate,onLoadedMetadata:handleLoadedMetadata,onEnded:()=>setIsPlaying(false),onPause:()=>setIsPlaying(false),onPlay:()=>setIsPlaying(true)}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-info\",children:[/*#__PURE__*/_jsx(\"h3\",{children:title}),description&&/*#__PURE__*/_jsx(\"p\",{children:description})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"player-controls\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:togglePlay,className:\"play-button\",disabled:loading,children:loading?'⏳':isPlaying?'⏸️':'▶️'}),/*#__PURE__*/_jsxs(\"div\",{className:\"progress-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-bar\",onClick:handleSeek,children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:\"\".concat(duration?currentTime/duration*100:0,\"%\")}})}),/*#__PURE__*/_jsx(\"div\",{className:\"time-info\",children:/*#__PURE__*/_jsxs(\"span\",{children:[formatTime(currentTime),\" / \",formatTime(duration)]})})]})]})]});};export default AudioPlayer;","map":{"version":3,"names":["React","useRef","useEffect","useState","Hls","jsx","_jsx","jsxs","_jsxs","AudioPlayer","_ref","streamingUrl","title","description","audioRef","isPlaying","setIsPlaying","duration","setDuration","currentTime","setCurrentTime","loading","setLoading","audio","current","isSupported","hls","enableWorker","lowLatencyMode","backBufferLength","loadSource","attachMedia","on","Events","MANIFEST_PARSED","console","log","ERROR","event","data","error","destroy","canPlayType","src","togglePlay","pause","play","handleTimeUpdate","handleLoadedMetadata","handleSeek","e","rect","currentTarget","getBoundingClientRect","percent","clientX","left","width","formatTime","time","isNaN","minutes","Math","floor","seconds","concat","toString","padStart","className","children","ref","onTimeUpdate","onLoadedMetadata","onEnded","onPause","onPlay","onClick","disabled","style"],"sources":["C:/Users/prakash.k/Main_Prakash/Audio-app/pkrk-fm-web/src/components/AudioPlayer.js"],"sourcesContent":["import React, { useRef, useEffect, useState } from 'react';\r\nimport Hls from 'hls.js';\r\n\r\nconst AudioPlayer = ({ streamingUrl, title, description }) => {\r\n  const audioRef = useRef(null);\r\n  const [isPlaying, setIsPlaying] = useState(false);\r\n  const [duration, setDuration] = useState(0);\r\n  const [currentTime, setCurrentTime] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const audio = audioRef.current;\r\n    if (!audio || !streamingUrl) return;\r\n\r\n    setLoading(true);\r\n\r\n    if (Hls.isSupported()) {\r\n      const hls = new Hls({\r\n        enableWorker: false,\r\n        lowLatencyMode: true,\r\n        backBufferLength: 90\r\n      });\r\n      \r\n      hls.loadSource(streamingUrl);\r\n      hls.attachMedia(audio);\r\n      \r\n      hls.on(Hls.Events.MANIFEST_PARSED, () => {\r\n        console.log('HLS manifest loaded successfully');\r\n        setLoading(false);\r\n      });\r\n\r\n      hls.on(Hls.Events.ERROR, (event, data) => {\r\n        console.error('HLS error:', data);\r\n        setLoading(false);\r\n      });\r\n\r\n      return () => {\r\n        hls.destroy();\r\n      };\r\n    } else if (audio.canPlayType('application/vnd.apple.mpegurl')) {\r\n      // Safari native HLS support\r\n      audio.src = streamingUrl;\r\n      setLoading(false);\r\n    } else {\r\n      console.error('HLS not supported');\r\n      setLoading(false);\r\n    }\r\n  }, [streamingUrl]);\r\n\r\n  const togglePlay = async () => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n\r\n    try {\r\n      if (isPlaying) {\r\n        audio.pause();\r\n        setIsPlaying(false);\r\n      } else {\r\n        await audio.play();\r\n        setIsPlaying(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Play error:', error);\r\n    }\r\n  };\r\n\r\n  const handleTimeUpdate = () => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n    setCurrentTime(audio.currentTime);\r\n  };\r\n\r\n  const handleLoadedMetadata = () => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n    setDuration(audio.duration);\r\n  };\r\n\r\n  const handleSeek = (e) => {\r\n    const audio = audioRef.current;\r\n    if (!audio) return;\r\n    \r\n    const rect = e.currentTarget.getBoundingClientRect();\r\n    const percent = (e.clientX - rect.left) / rect.width;\r\n    audio.currentTime = percent * duration;\r\n  };\r\n\r\n  const formatTime = (time) => {\r\n    if (isNaN(time)) return '0:00';\r\n    const minutes = Math.floor(time / 60);\r\n    const seconds = Math.floor(time % 60);\r\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  return (\r\n    <div className=\"audio-player\">\r\n      <audio\r\n        ref={audioRef}\r\n        onTimeUpdate={handleTimeUpdate}\r\n        onLoadedMetadata={handleLoadedMetadata}\r\n        onEnded={() => setIsPlaying(false)}\r\n        onPause={() => setIsPlaying(false)}\r\n        onPlay={() => setIsPlaying(true)}\r\n      />\r\n      \r\n      <div className=\"player-info\">\r\n        <h3>{title}</h3>\r\n        {description && <p>{description}</p>}\r\n      </div>\r\n      \r\n      <div className=\"player-controls\">\r\n        <button \r\n          onClick={togglePlay} \r\n          className=\"play-button\"\r\n          disabled={loading}\r\n        >\r\n          {loading ? '⏳' : (isPlaying ? '⏸️' : '▶️')}\r\n        </button>\r\n        \r\n        <div className=\"progress-container\">\r\n          <div className=\"progress-bar\" onClick={handleSeek}>\r\n            <div \r\n              className=\"progress-fill\"\r\n              style={{ width: `${duration ? (currentTime / duration) * 100 : 0}%` }}\r\n            />\r\n          </div>\r\n          <div className=\"time-info\">\r\n            <span>{formatTime(currentTime)} / {formatTime(duration)}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AudioPlayer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}